<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<title>Ijssalon — Online</title>
<style>
:root {--bg:#1f1f1f;--fg:#f0f0f0;--card:#2b2b2b;--border:#444;--accent:#3fa9f5;--accent-hover:#2d89d8;}
body{margin:0;font-family:system-ui,sans-serif;background:var(--bg);color:var(--fg);}
header{display:flex;justify-content:space-between;align-items:center;padding:1em 2em;background:var(--card);border-bottom:1px solid var(--border);}
.brand{display:flex;align-items:center;gap:0.8em;}
.brand-logo{background:black;color:white;border-radius:0.4em;padding:0.3em 0.6em;font-weight:bold;}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:1.5em;padding:2em;}
.card{background:var(--card);border-radius:1em;padding:1.2em;text-align:center;transition:transform 0.2s ease;}
.card:hover{transform:translateY(-5px);}
.card img{width:120px;height:120px;border-radius:50%;margin-bottom:1em;}
.qty{display:flex;justify-content:center;align-items:center;margin:1em 0;gap:0.5em;}
.qty input{width:60px;text-align:center;background:var(--bg);border:1px solid var(--border);border-radius:0.4em;color:var(--fg);padding:0.3em;}
.qty button{background:var(--accent);border:none;color:#fff;border-radius:0.4em;padding:0.3em 0.6em;cursor:pointer;font-weight:bold;transition:all 0.2s ease;}
.qty button:hover{background:var(--accent-hover);transform:scale(1.1);}
.add{background:var(--accent);color:#fff;border:none;padding:0.6em 1.2em;border-radius:0.6em;cursor:pointer;transition:all 0.2s ease;}
.add:hover{background:var(--accent-hover);transform:scale(1.05);box-shadow:0 0 12px rgba(63,169,245,0.4);}
</style>
</head>
<body>

<header>
<div class="brand"><div class="brand-logo">IJ</div><div>Ijssalon — Online</div></div>
</header>

<main class="grid" id="productGrid"></main>

<!-- Checkout Modal -->
<div id="checkoutModal" style="display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.75);justify-content:center;align-items:center;">
  <div style="background:var(--card);padding:2.5em;border-radius:1.2em;max-width:420px;width:90%;color:var(--fg);">
    <h2>Gegevens invullen</h2>
    <label>Naam:<br><input id="modalCustomerName" placeholder="Volledige naam"></label>
    <label>E-mail:<br><input id="modalCustomerEmail" type="email" placeholder="jouw@email.com"></label>
    <label>Leverdatum:<br><input id="modalDeliveryTime" type="date"></label>
    <div style="margin-top:1.5em;">
      <button onclick="closeCheckout()">Annuleren</button>
      <button onclick="finishCheckout()">Bestelling afronden</button>
    </div>
  </div>
</div>

<script>
const SHEETDB_URL = "https://sheetdb.io/api/v1/<JE_API_KEY>"; // <== Vul hier je SheetDB API in
const products=[
  {name:"Vanille",price:7.50,img:"https://i.imgur.com/cJTOOc5.png",desc:"Ambachtelijk, roomrijk"},
  {name:"Speculoos",price:5.50,img:"https://i.imgur.com/GIkJNso.png",desc:"Krokant en kruidig"},
  {name:"Kers",price:6.00,img:"https://i.imgur.com/pu7VLaH.png",desc:"Zoet en sappig"},
  {name:"Framboos",price:7.00,img:"https://i.imgur.com/ZKfIJ0c.png",desc:"Fris en fruitig"},
  {name:"Aardbei",price:6.00,img:"https://i.imgur.com/tim0a3Z.png",desc:"Lichtzoet en romig"},
  {name:"Oreo",price:6.50,img:"https://i.imgur.com/jsGkect.png",desc:"Met echte Oreo stukjes"}
];
let cart=[];

function renderProducts(){
  const grid=document.getElementById("productGrid");
  grid.innerHTML="";
  products.forEach((p,idx)=>{
    const card=document.createElement("div");
    card.className="card";
    card.innerHTML=`<img src="${p.img}" alt="${p.name}">
      <h3>${p.name}</h3>
      <p>€${p.price.toFixed(2)}/L</p>
      <small>${p.desc}</small>
      <div class="qty">
        <button onclick="changeQty(${idx},-1)">-</button>
        <input type="number" id="qty-${idx}" value="1" min="1">
        <button onclick="changeQty(${idx},1)">+</button>
      </div>
      <button class="add" onclick="addToCart(${idx})">Voeg toe</button>`;
    grid.appendChild(card);
  });
}

function changeQty(idx,delta){
  const input=document.getElementById("qty-"+idx);
  let val=parseInt(input.value)+delta;
  if(val<1)val=1;
  input.value=val;
}

function addToCart(idx){
  const qty=parseInt(document.getElementById("qty-"+idx).value);
  const product=products[idx];
  const existing=cart.find(i=>i.name===product.name);
  if(existing) existing.qty+=qty;
  else cart.push({...product,qty});
  alert(`Toegevoegd: ${product.name} x${qty}`);
}

function openCheckout(){document.getElementById("checkoutModal").style.display="flex";}
function closeCheckout(){document.getElementById("checkoutModal").style.display="none";}

function finishCheckout(){
  const name=document.getElementById("modalCustomerName").value.trim();
  const email=document.getElementById("modalCustomerEmail").value.trim();
  const delivery=document.getElementById("modalDeliveryTime").value.trim();
  if(!name||!email||!delivery){alert("Vul alles in!");return;}

  const [year,month,day]=delivery.split("-");
  const leverDatumFormatted = `${day}/${month}/${year}`;

  const orderData={
    Tijd:new Date().toLocaleString("nl-BE"),
    Naam:name,
    Email:email,
    Levermoment:leverDatumFormatted,
    Producten:cart.map(i=>`${i.name} x ${i.qty}`).join(", "),
    Totaal:cart.reduce((sum,i)=>sum+i.price*i.qty,0).toFixed(2)
  };

  fetch(SHEETDB_URL,{method:"POST",body:JSON.stringify({data:[orderData]}),headers:{"Content-Type":"application/json"}})
  .then(r=>r.json())
  .then(()=>{alert("Bestelling verstuurd!");cart=[];closeCheckout();})
  .catch(err=>console.error(err));
}

renderProducts();
</script>
</body>
</html>
